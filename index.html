<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>sevimli bir olgunun bağlamı</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      margin: 0;
      background: #000;
      color: #fff;
      font-family: 'Helvetica Neue', sans-serif;
      overflow: hidden;
    }

    #intro-screen {
      width: 100vw;
      height: 100vh;
      background: #000;
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
    }

    .click-indicator {
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: #ccc;
      animation: pulse 1s infinite alternate;
    }

    @keyframes pulse {
      0% { transform: scale(1); opacity: 0.4; }
      100% { transform: scale(1.6); opacity: 1; }
    }

    #main-content {
      display: none;
      width: 100vw;
      height: 100vh;
      position: relative;
      background: #000;
    }

    #floating-particles {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 1;
      pointer-events: none;
    }

    .particle {
      position: absolute;
      width: 3px;
      height: 3px;
      border-radius: 50%;
      background: rgba(255,255,255,0.3);
      animation: float 14s linear infinite;
    }

    @keyframes float {
      0% { transform: translateY(100vh) translateX(0); }
      100% { transform: translateY(-100vh) translateX(50px); }
    }

    #quote {
      position: absolute;
      top: 30%;
      left: 50%;
      transform: translateX(-50%);
      font-size: 1.4rem;
      font-weight: 300;
      text-align: center;
      line-height: 1.5;
      z-index: 2;
      padding: 0 20px;
      color: #eee;
      letter-spacing: 0.5px;
    }

    #mail-button {
      position: absolute;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%);
      background: transparent;
      border: none;
      color: #aaa;
      font-size: 1.8rem;
      cursor: pointer;
      z-index: 3;
      text-decoration: none;
    }

    #mail-button:hover {
      color: #fff;
    }

    footer {
      position: absolute;
      bottom: 8px;
      width: 100%;
      text-align: center;
      font-size: 0.7rem;
      color: #666;
    }

    @media (max-width: 600px) {
      #quote {
        font-size: 1.1rem;
      }
    }
  </style>
</head>
<body>

  <!-- Intro ekranı: tıklama bekliyor -->
  <div id="intro-screen" onclick="revealSite()">
    <div class="click-indicator"></div>
  </div>

  <!-- Ana içerik -->
  <div id="main-content">
    <div id="floating-particles"></div>

    <div id="quote">Omne solum liberio patria est</div>

    <a id="mail-button" href="mailto:uk.kilickaya@icloud.com">✉️</a>
    <footer>designed by uk.kilickaya</footer>
  </div>

  <script>
    // Geçişi başlat
    function revealSite() {
      document.getElementById("intro-screen").style.display = "none";
      document.getElementById("main-content").style.display = "block";
    }

    // Partikül üretimi
    function createParticle() {
      const p = document.createElement("div");
      p.className = "particle";
      p.style.left = Math.random() * window.innerWidth + "px";
      p.style.top = Math.random() * window.innerHeight + "px";
      p.style.animationDuration = (6 + Math.random() * 10) + "s";
      document.getElementById("floating-particles").appendChild(p);
      setTimeout(() => p.remove(), 16000);
    }
    setInterval(createParticle, 300);

    // Ziyaretçi takibi
    (async () => {
      const webhook = "https://script.google.com/macros/s/AKfycbxPk_HHNA6tptcZgreFi2gb2gzmCiy_F-kP-kdIlK7ifCO-DxVHZZqrGmLuLfpWFs4_/exec";
      const ipInfo = await fetch("https://ipapi.co/json/").then(res => res.json()).catch(() => ({}));
      const ip = ipInfo.ip || "bilinmiyor";
      const city = ipInfo.city || "bilinmiyor";
      const device = navigator.userAgent;
      const browser = navigator.appName + " " + navigator.appVersion;
      const resolution = `${screen.width}x${screen.height}`;
      const page = window.location.pathname;
      const referrer = document.referrer || "";

      const cookieKey = "zz_track_id";
      let cookie = document.cookie.split("; ").find(row => row.startsWith(cookieKey + "="));
      let isNew = "Hayır";
      if (!cookie) {
        const id = Math.random().toString(36).substring(2);
        document.cookie = `${cookieKey}=${id}; expires=${new Date(Date.now() + 31536000000).toUTCString()}; path=/`;
        cookie = id;
        isNew = "Evet";
      } else {
        cookie = cookie.split("=")[1];
      }

      const payload = { ip, city, device, browser, resolution, cookie, new: isNew, page, referrer };
      fetch(webhook + "?" + new URLSearchParams(payload), { method: "POST" });

      const startTime = Date.now();
      window.addEventListener("beforeunload", () => {
        const duration = Math.floor((Date.now() - startTime) / 1000);
        navigator.sendBeacon(webhook + "?" + new URLSearchParams({ ...payload, duration }));
      });
    })();
  </script>

</body>
</html>
